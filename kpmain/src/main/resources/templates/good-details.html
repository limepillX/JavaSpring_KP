<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <title th:text="${good[0].name}"></title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

    <style>
      a {
        text-decoration: none;
        font-weight: bold;
        color: gray;
      }
    </style>
  </head>
  <body class="container">
    <header th:insert="blocks/header :: navbar" />

    <div th:each="el : ${good}">
      <p th:text="${el.name}" class="fs-1 ms-3" />
      <img
        th:src="${el.image}"
        class="border my-3"
        style="width: 30%"
        alt="Картинка"
      />
      <p th:text="${el.desc}" class="fs-4" />
      <div id="mark" class="my-2">
        <text
          th:text="'Оценка: ' + ${el.mark} + ' (' + ${el.marks_amount} + ')'"
          class="card-text"
        />
        <img
          style="width: 1.5%"
          src="https://cdn.pixabay.com/photo/2016/03/31/14/48/star-1292832_1280.png"
          alt="звезда"
        />
        <br />
        <a
          th:text="${el.author.username}"
          th:href="'../user/' + ${el.author.id}"
        ></a
        ><span
          class="fst-italic"
          th:text="' (' +${el.author.status}+')'"
        ></span>
      </div>
      <a th:href="'/good/rank/' + ${el.id}" class="btn btn-success mb-5"
        >Оценить продукт</a
      >
      <a th:href="'/goods/YNrank/' + ${el.id}" class="btn btn-success mb-5"
        >Пройти да/нет опрос</a
      >
      <a
        sec:authorize="hasAuthority('ADMIN')"
        th:href="'/goods/edit/' + ${el.id}"
        class="btn btn-danger mb-5"
        >Редактировать</a
      >
      <a
        sec:authorize="hasAuthority('ADMIN')"
        th:href="'/goods/delete/' + ${el.id}"
        class="btn btn-danger mb-5"
        >Удалить</a
      >
      <span th:each="review : ${reviews}">
        <div class="alert alert-info">
          <b th:text="${review.mark}"></b>
          <img
            style="width: 1.5%"
            src="https://cdn.pixabay.com/photo/2016/03/31/14/48/star-1292832_1280.png"
            alt="звезда"
          />
          -
          <i>
            <a
              th:href="'../user/' + ${review.author.id}"
              th:text="${review.AuthorName}"
            ></a>
          </i>
          <span
            class="fst-italic"
            th:text="' (' +${review.author.status}+')'"
          ></span>
          <br />
          <i th:utext="${review.text}"></i>
        </div>
      </span>
    </div>
  </body>
</html>
